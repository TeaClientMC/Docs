# DO NOT TOUCH THIS FILE
# Please speak to SudoVanilla (Korbs) if you have any issues.

name: Deploy Docs

on:
  push:
    branches: [ "starlight" ]

  workflow_dispatch:

jobs:
  build:
    runs-on: self-hosted

    steps:
      - uses: actions/checkout@v3

      - name: Build and Deploy
      # Install Dependenices
      - run: bun install
      # Fix Sharp
      - run: cd ./node_modules/sharp/
      - run: bun run install
      # Build Docs
      - run: cd ../../
      - run: bun run build
      # Add to NGINX
      - run: mv dist/ docs/
      - run: cp -R docs/ /home/tea/sites/
